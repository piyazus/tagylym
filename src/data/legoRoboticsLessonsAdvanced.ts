// LEGO Robotics Lessons Data - Advanced Module (Lessons 9-10)
import { Lesson } from '@/types/lesson';

export const legoRoboticsLessonsAdvanced: Lesson[] = [
    {
        id: 'lego-lesson-9',
        number: 9,
        title: 'Сложные алгоритмы (PID, массивы)',
        description: 'PID-регулятор для плавного движения и работа с данными',
        level: 'advanced',
        duration: '70 мин',
        sections: [
            {
                id: 'pid-intro',
                title: 'Введение в PID-регулятор',
                blocks: [
                    { type: 'text', content: 'PID = Пропорциональный + Интегральный + Дифференциальный регулятор.' },
                    { type: 'heading', level: 3, content: 'Компоненты PID' },
                    {
                        type: 'list', ordered: false, items: [
                            'P (Пропорциональный): Реакция на текущую ошибку. Большая ошибка → сильная коррекция',
                            'I (Интегральный): Накопленная ошибка за время. Компенсирует постоянный сдвиг',
                            'D (Дифференциальный): Скорость изменения ошибки. Предотвращает перерегулирование'
                        ]
                    },
                    { type: 'text', content: 'Формула: Коррекция = Kp × Error + Ki × ΣError + Kd × (Error − LastError)' }
                ]
            },
            {
                id: 'pid-tuning',
                title: 'Настройка коэффициентов',
                blocks: [
                    { type: 'heading', level: 3, content: 'Метод Циглера-Николса' },
                    {
                        type: 'list', ordered: true, items: [
                            'Установите Ki = 0, Kd = 0',
                            'Увеличивайте Kp, пока не начнётся колебание',
                            'Запишите это значение как Ku (критическое усиление)',
                            'Kp = 0.6 × Ku, Ki = 0.01, Kd = Kp × 0.1'
                        ]
                    },
                    { type: 'note', variant: 'tip', content: 'Для линии: начните с Kp = 0.5, Ki = 0, Kd = 0.2' }
                ]
            },
            {
                id: 'arrays',
                title: 'Массивы и данные',
                blocks: [
                    { type: 'text', content: 'Массивы хранят наборы значений: координаты, калибровку, последовательности действий.' },
                    { type: 'heading', level: 3, content: 'Применения' },
                    {
                        type: 'list', ordered: false, items: [
                            'Хранение «золотых» чисел калибровки',
                            'Последовательность миссий',
                            'История показаний датчиков для фильтрации'
                        ]
                    }
                ]
            }
        ],
        practicalTasks: [
            { type: 'task', title: 'PID-линия', description: 'Реализуйте PID для следования по линии со скоростью 50%' },
            { type: 'task', title: 'Калибровочный массив', description: 'Используйте массив для хранения калибровочных значений датчиков' }
        ],
        quiz: [
            { id: 'lq9-1', question: 'Что компенсирует I-компонент PID?', options: ['Текущую ошибку', 'Накопленную ошибку', 'Скорость изменения', 'Ничего'], correctAnswer: 1, explanation: 'Интегральный компонент накапливает ошибку и компенсирует постоянный сдвиг.' },
            { id: 'lq9-2', question: 'Зачем нужен D-компонент?', options: ['Для ускорения', 'Для предотвращения перерегулирования', 'Для точности', 'Не нужен'], correctAnswer: 1, explanation: 'D-компонент предсказывает и «гасит» колебания.' }
        ]
    },
    {
        id: 'lego-lesson-10',
        number: 10,
        title: 'Оптимизация и тайм-менеджмент',
        description: 'Параллельные действия, оптимизация траекторий и управление временем',
        level: 'advanced',
        duration: '60 мин',
        sections: [
            {
                id: 'parallel-actions',
                title: 'Параллельные действия',
                blocks: [
                    { type: 'text', content: 'Выполнение нескольких действий одновременно экономит драгоценные секунды.' },
                    { type: 'heading', level: 3, content: 'Техники' },
                    {
                        type: 'list', ordered: false, items: [
                            'Подъём руки во время движения к цели',
                            'Открытие захвата при подъезде',
                            'Сброс датчиков параллельно с движением'
                        ]
                    },
                    { type: 'note', variant: 'tip', content: 'Используйте блоки «запустить параллельно» или «не ждать завершения».' }
                ]
            },
            {
                id: 'trajectory-optimization',
                title: 'Оптимизация траекторий',
                blocks: [
                    { type: 'heading', level: 3, content: 'Принципы' },
                    {
                        type: 'list', ordered: false, items: [
                            'Минимизация поворотов — каждый поворот добавляет ошибку',
                            'Дуговое движение вместо «вперёд-поворот-вперёд»',
                            'Объединение близких миссий в один заезд',
                            'Расчёт времени каждого этапа'
                        ]
                    },
                    { type: 'text', content: 'Пример: Прямой путь 80 см = 3 сек. Путь с поворотом = 5 сек. Экономия 2 сек = +1 миссия!' }
                ]
            },
            {
                id: 'time-management',
                title: 'Управление временем матча',
                blocks: [
                    { type: 'heading', level: 3, content: 'Структура 2.5 минут' },
                    { type: 'text', content: 'Заезд 1: 0:00-0:40 (40 сек)\nЗаезд 2: 0:40-1:15 (35 сек)\nЗаезд 3: 1:15-1:45 (30 сек)\nЗаезд 4: 1:45-2:15 (30 сек)\nЗапас: 15 сек' },
                    { type: 'note', variant: 'warning', content: 'Всегда оставляйте 10-15 секунд запаса на непредвиденные ситуации!' }
                ]
            },
            {
                id: 'tournament-prep',
                title: 'Подготовка к турниру',
                blocks: [
                    { type: 'heading', level: 3, content: 'Чеклист команды' },
                    {
                        type: 'list', ordered: false, items: [
                            'Батареи заряжены (3+ комплекта)',
                            'Запасные детали для робота',
                            'Распечатанные программы',
                            'Протокол миссий с числами',
                            'План B на случай сбоя ключевой миссии'
                        ]
                    },
                    { type: 'note', variant: 'info', content: 'На турнире будет волнение. Чеклисты и протоколы — ваша страховка от ошибок.' }
                ]
            }
        ],
        practicalTasks: [
            { type: 'task', title: 'Параллельный заезд', description: 'Реализуйте заезд с параллельными действиями, сравните время' },
            { type: 'task', title: 'Полный план матча', description: 'Создайте план на 2.5 минуты', subtasks: ['Все заезды с таймингами', 'Сумма очков', 'План B для критичных миссий'] },
            { type: 'task', title: 'Генеральная репетиция', description: 'Прогоните весь матч 3 раза, зафиксируйте результаты' }
        ],
        quiz: [
            { id: 'lq10-1', question: 'Зачем оставлять запас времени?', options: ['Не нужно', 'На случай ошибок и задержек', 'Для отдыха', 'Правила требуют'], correctAnswer: 1, explanation: 'Запас компенсирует непредвиденные задержки.' },
            { id: 'lq10-2', question: 'Что экономит параллельное выполнение?', options: ['Батарею', 'Время', 'Память', 'Ничего'], correctAnswer: 1, explanation: 'Параллельные действия сокращают общее время заезда.' }
        ]
    }
];
