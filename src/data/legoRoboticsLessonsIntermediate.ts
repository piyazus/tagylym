// LEGO Robotics Lessons Data - Intermediate Module (Lessons 5-8)
import { Lesson } from '@/types/lesson';

export const legoRoboticsLessonsIntermediate: Lesson[] = [
    {
        id: 'lego-lesson-5',
        number: 5,
        title: 'Работа с датчиками (линии и повороты)',
        description: 'Слежение за линией и точные повороты с гироскопом',
        level: 'intermediate',
        duration: '60 мин',
        sections: [
            {
                id: 'color-sensor',
                title: 'Датчик цвета для линии',
                blocks: [
                    { type: 'text', content: 'Датчик цвета измеряет отражённый свет (0-100). Белый ≈ 80-100, Чёрный ≈ 0-20.' },
                    { type: 'heading', level: 3, content: 'Калибровка' },
                    {
                        type: 'list', ordered: true, items: [
                            'Поместите датчик над белым — запишите значение (например, 85)',
                            'Поместите датчик над чёрным — запишите значение (например, 10)',
                            'Середина = (85 + 10) / 2 = 47.5 ≈ 48'
                        ]
                    },
                    { type: 'note', variant: 'tip', content: 'Калибруйте при каждом включении! Освещение влияет на показания.' }
                ]
            },
            {
                id: 'line-following',
                title: 'Следование по линии',
                blocks: [
                    { type: 'heading', level: 3, content: 'Простой «зигзаг»' },
                    { type: 'text', content: 'ЕСЛИ (яркость < середина) ТО [поворот влево] ИНАЧЕ [поворот вправо]' },
                    { type: 'heading', level: 3, content: 'Пропорциональный регулятор' },
                    { type: 'text', content: 'Формула: Коррекция = (Яркость − Середина) × Kp' },
                    {
                        type: 'list', ordered: false, items: [
                            'Яркость = текущее значение датчика',
                            'Середина = калиброванное значение границы',
                            'Kp = коэффициент усиления (начните с 0.5)'
                        ]
                    },
                    { type: 'text', content: 'Левый мотор = Базовая_мощность + Коррекция\nПравый мотор = Базовая_мощность − Коррекция' }
                ]
            },
            {
                id: 'gyro-basics',
                title: 'Гироскоп для поворотов',
                blocks: [
                    { type: 'text', content: 'Гироскоп измеряет угол поворота робота в градусах.' },
                    { type: 'heading', level: 3, content: 'Поворот на угол' },
                    {
                        type: 'list', ordered: true, items: [
                            'Сбросить гироскоп в 0',
                            'Крутить моторами (один вперёд, другой назад)',
                            'Ждать, пока угол не достигнет цели',
                            'Остановить моторы'
                        ]
                    },
                    { type: 'note', variant: 'warning', content: 'Гироскоп «плывёт» со временем. Сбрасывайте перед каждым манёвром!' }
                ]
            }
        ],
        practicalTasks: [
            { type: 'task', title: 'Следование по линии', description: 'Проехать по овальной трассе 2 круга без съезда' },
            { type: 'task', title: 'Гиро-повороты', description: 'Повороты на 90°, 180°, 360° с погрешностью ±3°' },
            { type: 'task', title: 'Комбо', description: 'Ехать по линии до перекрёстка, повернуть на 90° по гиро, продолжить' }
        ],
        quiz: [
            { id: 'lq5-1', question: 'Зачем нужна калибровка датчика?', options: ['Для красоты', 'Для компенсации освещения', 'Для скорости', 'Не нужна'], correctAnswer: 1, explanation: 'Калибровка компенсирует разницу в освещении.' },
            { id: 'lq5-2', question: 'Что такое Kp?', options: ['Скорость', 'Коэффициент усиления регулятора', 'Угол', 'Расстояние'], correctAnswer: 1, explanation: 'Kp определяет силу реакции на отклонение.' }
        ]
    },
    {
        id: 'lego-lesson-6',
        number: 6,
        title: 'Структурирование кода (My Blocks)',
        description: 'Создание пользовательских блоков и модульный подход',
        level: 'intermediate',
        duration: '55 мин',
        sections: [
            {
                id: 'why-myblocks',
                title: 'Зачем нужны My Blocks',
                blocks: [
                    {
                        type: 'list', ordered: false, items: [
                            'Повторное использование — написал один раз, используй везде',
                            'Читаемость — «Собрать_Конус» понятнее, чем 20 блоков',
                            'Отладка — каждый блок можно тестировать отдельно',
                            'Командная работа — один делает движение, другой — захват'
                        ]
                    }
                ]
            },
            {
                id: 'creating-myblocks',
                title: 'Создание My Block',
                blocks: [
                    {
                        type: 'list', ordered: true, items: [
                            'Выделите группу блоков',
                            'Правый клик → «Создать мой блок»',
                            'Задайте имя и описание',
                            'Добавьте входные параметры (если нужно)'
                        ]
                    },
                    { type: 'heading', level: 3, content: 'Примеры стандартных блоков' },
                    {
                        type: 'list', ordered: false, items: [
                            'Ехать_Прямо(расстояние_см, мощность)',
                            'Повернуть(угол_градусов)',
                            'Собрать_Элемент()',
                            'Вернуться_В_Базу()'
                        ]
                    }
                ]
            },
            {
                id: 'parameters',
                title: 'Параметры и переменные',
                blocks: [
                    { type: 'text', content: 'Параметры делают My Block гибким:' },
                    { type: 'text', content: 'Ехать_Прямо(50, 30) — 50 см со скоростью 30%\nЕхать_Прямо(100, 50) — 100 см со скоростью 50%' },
                    { type: 'note', variant: 'tip', content: 'Используйте говорящие имена: Расстояние_см, Угол_град, Мощность_процент' }
                ]
            }
        ],
        practicalTasks: [
            { type: 'task', title: 'Библиотека движения', description: 'Создайте блоки: Ехать_Прямо, Повернуть_Влево, Повернуть_Вправо' },
            { type: 'task', title: 'Миссия из блоков', description: 'Соберите миссию целиком из My Blocks (минимум 5 блоков)' }
        ],
        quiz: [
            { id: 'lq6-1', question: 'Зачем использовать My Blocks?', options: ['Только для красоты', 'Для повторного использования и читаемости', 'Для скорости', 'Не нужны'], correctAnswer: 1, explanation: 'My Blocks упрощают разработку, отладку и командную работу.' }
        ]
    },
    {
        id: 'lego-lesson-7',
        number: 7,
        title: 'Стратегия и отладка',
        description: 'Планирование матча, анализ ошибок и ведение протокола',
        level: 'intermediate',
        duration: '60 мин',
        sections: [
            {
                id: 'match-planning',
                title: 'Планирование матча',
                blocks: [
                    { type: 'heading', level: 3, content: 'Анализ миссий' },
                    {
                        type: 'list', ordered: false, items: [
                            'Изучите правила и подсчёт очков',
                            'Определите «лёгкие победы» — миссии с высоким соотношением очков/сложность',
                            'Сгруппируйте миссии по расположению',
                            'Спланируйте маршруты выездов'
                        ]
                    },
                    { type: 'note', variant: 'tip', content: 'Стабильные 200 очков лучше, чем рискованные 400.' }
                ]
            },
            {
                id: 'run-structure',
                title: 'Структура заезда',
                blocks: [
                    { type: 'heading', level: 3, content: 'Оптимальная структура' },
                    {
                        type: 'list', ordered: false, items: [
                            '3-5 выездов из базы',
                            'Каждый заезд: 2-4 миссии',
                            'Запас времени на ошибки'
                        ]
                    },
                    { type: 'text', content: 'Заезд 1 (45 сек): Миссии A, B, C → Возврат\nЗаезд 2 (35 сек): Миссии D, E → Возврат\nЗаезд 3 (30 сек): Миссия F (сложная) → Возврат' }
                ]
            },
            {
                id: 'debugging',
                title: 'Системная отладка',
                blocks: [
                    { type: 'heading', level: 3, content: 'Протокол тестирования' },
                    { type: 'text', content: '| Попытка | Результат | Ошибка | Исправление |\n|---------|-----------|--------|-------------|\n| 1 | 48 см | Недолёт | +50 градусов |\n| 2 | 53 см | Небольшой перелёт | -20 градусов |' },
                    { type: 'note', variant: 'warning', content: 'Вносите ОДНО изменение за раз. Иначе не поймёте, что помогло!' }
                ]
            }
        ],
        practicalTasks: [
            { type: 'task', title: 'План матча', description: 'Создайте план на 3 заезда с расчётом очков и времени' },
            { type: 'task', title: 'Протокол отладки', description: 'Ведите протокол для одной миссии, добейтесь 5 успехов подряд' }
        ],
        quiz: [
            { id: 'lq7-1', question: 'Сколько изменений вносить за раз?', options: ['Все сразу', 'Несколько', 'Одно', 'Зависит от ситуации'], correctAnswer: 2, explanation: 'Одно изменение за раз — ключ к эффективной отладке.' }
        ]
    },
    {
        id: 'lego-lesson-8',
        number: 8,
        title: 'Программирование для стабильности',
        description: 'Обработка ошибок, выравнивание и надёжные алгоритмы',
        level: 'intermediate',
        duration: '55 мин',
        sections: [
            {
                id: 'alignment',
                title: 'Техники выравнивания',
                blocks: [
                    { type: 'heading', level: 3, content: 'Выравнивание по стене' },
                    { type: 'text', content: 'Робот упирается в стену одним или двумя бамперами, сбрасывая накопленную ошибку.' },
                    {
                        type: 'list', ordered: true, items: [
                            'Ехать назад с небольшой мощностью',
                            'Ждать увеличения тока (сопротивление)',
                            'Остановиться и обнулить позицию'
                        ]
                    },
                    { type: 'heading', level: 3, content: 'Выравнивание по линии' },
                    { type: 'text', content: 'Два датчика цвета. Крутить моторы, пока оба не увидят линию.' }
                ]
            },
            {
                id: 'error-handling',
                title: 'Обработка ошибок',
                blocks: [
                    { type: 'heading', level: 3, content: 'Таймаут операций' },
                    { type: 'text', content: 'ЕСЛИ (время > 3 секунды) ТО [прервать и продолжить]' },
                    { type: 'note', variant: 'warning', content: 'Робот не должен «застрять» — лучше частичный успех, чем провал всего заезда.' }
                ]
            },
            {
                id: 'reliability',
                title: 'Стабильность vs Скорость',
                blocks: [
                    {
                        type: 'list', ordered: false, items: [
                            'Ниже мощность = меньше проскальзывания',
                            'Больше выравниваний = меньше накопленной ошибки',
                            'Запас расстояния = компенсация вариативности'
                        ]
                    },
                    { type: 'note', variant: 'info', content: 'Золотое правило: Если миссия работает 9 из 10 раз — она не надёжна для турнира. Цель: 10 из 10.' }
                ]
            }
        ],
        practicalTasks: [
            { type: 'task', title: 'Выравнивание по стене', description: 'Реализуйте и протестируйте (погрешность < 5°)' },
            { type: 'task', title: '10 из 10', description: 'Добейтесь 10 успешных выполнений миссии подряд' }
        ],
        quiz: [
            { id: 'lq8-1', question: 'Зачем нужны таймауты?', options: ['Для красоты', 'Чтобы робот не застрял навсегда', 'Для скорости', 'Не нужны'], correctAnswer: 1, explanation: 'Таймаут предотвращает «зависание» робота.' }
        ]
    }
];
